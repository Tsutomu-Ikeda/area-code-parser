import pytest

from section_parser import parse_section_text


@pytest.mark.parametrize(
    "input_text, expected",
    [
        (
            "北海道沙流郡（平取町及び日高町（栄町西、栄町東、新町、千栄、富岡、日高、本町西、本町東、松風町、三岩、宮下町、山手町及び若葉町に限る。）に限る。）",
            [
                {
                    "name": "北海道沙流郡",
                    "exclude": [],
                    "include": [
                        {"name": "平取町"},
                        {
                            "name": "日高町",
                            "exclude": [],
                            "include": [
                                {"name": "栄町西"},
                                {"name": "栄町東"},
                                {"name": "新町"},
                                {"name": "千栄"},
                                {"name": "富岡"},
                                {"name": "日高"},
                                {"name": "本町西"},
                                {"name": "本町東"},
                                {"name": "松風町"},
                                {"name": "三岩"},
                                {"name": "宮下町"},
                                {"name": "山手町"},
                                {"name": "若葉町"},
                            ],
                        },
                    ],
                }
            ],
        ),
        (
            "北海道標津郡標津町、野付郡別海町（尾岱沼、尾岱沼港町、尾岱沼岬町、尾岱沼潮見町及び床丹に限る。）、目梨郡",
            [
                {"name": "北海道標津郡標津町"},
                {
                    "name": "北海道野付郡別海町",
                    "exclude": [],
                    "include": [
                        {"name": "尾岱沼"},
                        {"name": "尾岱沼港町"},
                        {"name": "尾岱沼岬町"},
                        {"name": "尾岱沼潮見町"},
                        {"name": "床丹"},
                    ],
                },
                {"name": "北海道目梨郡"},
            ],
        ),
        (
            "北海道網走郡（大空町（東藻琴、東藻琴清浦、東藻琴栄、東藻琴新富、東藻琴末広、東藻琴大進、東藻琴千草、東藻琴西倉、東藻琴福富、東藻琴明生及び東藻琴山園に限る。）を除く。）",
            [
                {
                    "name": "北海道網走郡",
                    "exclude": [
                        {
                            "name": "大空町",
                            "exclude": [],
                            "include": [
                                {"name": "東藻琴"},
                                {"name": "東藻琴清浦"},
                                {"name": "東藻琴栄"},
                                {"name": "東藻琴新富"},
                                {"name": "東藻琴末広"},
                                {"name": "東藻琴大進"},
                                {"name": "東藻琴千草"},
                                {"name": "東藻琴西倉"},
                                {"name": "東藻琴福富"},
                                {"name": "東藻琴明生"},
                                {"name": "東藻琴山園"},
                            ],
                        }
                    ],
                    "include": [],
                }
            ],
        ),
        (
            "青森県八戸市、上北郡おいらせ町、三戸郡（五戸町、新郷村、南部町（相内、赤石、大向、沖田面、小向及び玉掛を除く。）及び階上町に限る。）",
            [
                {"name": "青森県八戸市"},
                {"name": "青森県上北郡おいらせ町"},
                {
                    "name": "青森県三戸郡",
                    "exclude": [],
                    "include": [
                        {"name": "五戸町"},
                        {"name": "新郷村"},
                        {
                            "name": "南部町",
                            "exclude": [
                                {"name": "相内"},
                                {"name": "赤石"},
                                {"name": "大向"},
                                {"name": "沖田面"},
                                {"name": "小向"},
                                {"name": "玉掛"},
                            ],
                            "include": [],
                        },
                        {"name": "階上町"},
                    ],
                },
            ]
        ),
        (
            "東京都町田市（三輪町及び三輪緑山を除く。）、神奈川県相模原市（緑区（小原、小渕、佐野川、澤井、寸沢嵐、千木良、名倉、日連、牧野、吉野、与瀬、与瀬本町及び若柳に限る。）及び南区（磯部、新磯野一丁目及び三丁目から五丁目まで、新戸、相武台並びに相武台団地に限る。）を除く。）、座間市（相模が丘一丁目及び五丁目に限る。）",
            [
                {
                    "name": "東京都町田市",
                    "exclude": [{"name": "三輪町"}, {"name": "三輪緑山"}],
                    "include": [],
                },
                {
                    "name": "神奈川県相模原市",
                    "exclude": [
                        {
                            "name": "緑区",
                            "exclude": [],
                            "include": [
                                {"name": "小原"},
                                {"name": "小渕"},
                                {"name": "佐野川"},
                                {"name": "澤井"},
                                {"name": "寸沢嵐"},
                                {"name": "千木良"},
                                {"name": "名倉"},
                                {"name": "日連"},
                                {"name": "牧野"},
                                {"name": "吉野"},
                                {"name": "与瀬"},
                                {"name": "与瀬本町"},
                                {"name": "若柳"},
                            ],
                        },
                        {
                            "name": "南区",
                            "exclude": [],
                            "include": [
                                {"name": "磯部"},
                                {"name": "新磯野一丁目"},
                                {"name": "新磯野三丁目"},
                                {"name": "新磯野四丁目"},
                                {"name": "新磯野五丁目"},
                                {"name": "新戸"},
                                {"name": "相武台"},
                                {"name": "相武台団地"},
                            ],
                        },
                    ],
                    "include": [],
                },
                {
                    "name": "神奈川県座間市",
                    "exclude": [],
                    "include": [{"name": "相模が丘一丁目"}, {"name": "相模が丘五丁目"}],
                },
            ],
        ),
        (
            "東京都稲城市、小金井市（梶野町一丁目から四丁目まで並びに東町二丁目及び三丁目を除く。）、国分寺市（高木町、内藤、西町、光町、日吉町二丁目及び三丁目、富士本並びに戸倉三丁目を除く。）、小平市（鈴木町二丁目、花小金井及び花小金井南町を除く。）、多摩市、東村山市、府中市（押立町四丁目及び五丁目、北山町、西原町二丁目から四丁目まで並びに西府町四丁目を除く。）",
            [
                {"name": "東京都稲城市"},
                {
                    "name": "東京都小金井市",
                    "exclude": [
                        {"name": "梶野町一丁目"},
                        {"name": "梶野町二丁目"},
                        {"name": "梶野町三丁目"},
                        {"name": "梶野町四丁目"},
                        {"name": "東町二丁目"},
                        {"name": "東町三丁目"},
                    ],
                    "include": [],
                },
                {
                    "name": "東京都国分寺市",
                    "exclude": [
                        {"name": "高木町"},
                        {"name": "内藤"},
                        {"name": "西町"},
                        {"name": "光町"},
                        {"name": "日吉町二丁目"},
                        {"name": "日吉町三丁目"},
                        {"name": "富士本"},
                        {"name": "戸倉三丁目"},
                    ],
                    "include": [],
                },
                {
                    "name": "東京都小平市",
                    "exclude": [
                        {"name": "鈴木町二丁目"},
                        {"name": "花小金井"},
                        {"name": "花小金井南町"},
                    ],
                    "include": [],
                },
                {"name": "東京都多摩市"},
                {"name": "東京都東村山市"},
                {
                    "name": "東京都府中市",
                    "exclude": [
                        {"name": "押立町四丁目"},
                        {"name": "押立町五丁目"},
                        {"name": "北山町"},
                        {"name": "西原町二丁目"},
                        {"name": "西原町三丁目"},
                        {"name": "西原町四丁目"},
                        {"name": "西府町四丁目"},
                    ],
                    "include": [],
                },
            ],
        ),
        (
            "東京都２３区、狛江市（西和泉を除く。）、調布市（入間町、国領町八丁目、仙川町、西つつじヶ丘二丁目、東つつじヶ丘、緑ヶ丘及び若葉町に限る。）、三鷹市中原一丁目",
            [
                {"name": "東京都２３区"},
                {
                    "name": "東京都狛江市",
                    "exclude": [{"name": "西和泉"}],
                    "include": [],
                },
                {
                    "name": "東京都調布市",
                    "exclude": [],
                    "include": [
                        {"name": "入間町"},
                        {"name": "国領町八丁目"},
                        {"name": "仙川町"},
                        {"name": "西つつじヶ丘二丁目"},
                        {"name": "東つつじヶ丘"},
                        {"name": "緑ヶ丘"},
                        {"name": "若葉町"},
                    ],
                },
                {"name": "東京都三鷹市中原一丁目"},
            ],
        ),
        (
            "東京都小金井市（梶野町一丁目から四丁目まで並びに東町二丁目及び三丁目に限る。）、調布市（深大寺東町七丁目及び野水に限る。）、西東京市新町、三鷹市（中原一丁目を除く。）、武蔵野市",
            [
                {
                    "name": "東京都小金井市",
                    "exclude": [],
                    "include": [
                        {"name": "梶野町一丁目"},
                        {"name": "梶野町二丁目"},
                        {"name": "梶野町三丁目"},
                        {"name": "梶野町四丁目"},
                        {"name": "東町二丁目"},
                        {"name": "東町三丁目"},
                    ],
                },
                {
                    "name": "東京都調布市",
                    "exclude": [],
                    "include": [
                        {"name": "深大寺東町七丁目"},
                        {"name": "野水"},
                    ],
                },
                {
                    "name": "東京都西東京市新町",
                },
                {
                    "name": "東京都三鷹市",
                    "exclude": [{"name": "中原一丁目"}],
                    "include": [],
                },
                {
                    "name": "東京都武蔵野市",
                },
            ],
        ),
        (
            "新潟県燕市（秋葉町、井土巻、大関、大船渡、大曲、上児木、勘新、蔵関、小池、小池新町、穀町、小関、小高、寿町、小中川、小古津新、小牧、幸町、桜町、佐渡、三王渕、下児木、新栄町、新生町、新町、水道町、杉名、杉柳、関崎、杣木、舘野、中央通、長所、長所乙、長所甲、次新、燕、道金、殿島、中川、仲町、長渡、二階堂、灰方、白山町、八王寺、花園町、花見、東太田、日之出町、物流センタ－、本町、又新、松橋、南、宮町、柳山、横田及び四ツ屋を除く。）、新潟市西蒲区（打越、姥島、潟浦新、上小吉、高野宮、河間、五之上、小吉、道上、中之口、長場、羽黒、針ヶ曽根、東小吉、東中、東船越、福島、真木、巻大原、牧ケ島、三ツ門、門田及び六部を除く。）、長岡市（赤沼、大沼新田、小沼新田、下沼新田、寺泊小豆曽根、寺泊有信、寺泊入軽井、寺泊岩方、寺泊木島、寺泊北曽根、寺泊五分一、寺泊下桐、寺泊下中条、寺泊新長、寺泊高内、寺泊竹森、寺泊田尻、寺泊敦ケ曽根、寺泊当新田、寺泊中曽根、寺泊硲田、寺泊万善寺、寺泊平野新村新田、寺泊蛇塚、寺泊町軽井、寺泊求草、寺泊矢田、寺泊鰐口、中条新田、中之島西野及び真野代新田に限る。）、西蒲原郡",
            [
                {
                    "name": "新潟県燕市",
                    "exclude": [
                        {"name": "秋葉町"},
                        {"name": "井土巻"},
                        {"name": "大関"},
                        {"name": "大船渡"},
                        {"name": "大曲"},
                        {"name": "上児木"},
                        {"name": "勘新"},
                        {"name": "蔵関"},
                        {"name": "小池"},
                        {"name": "小池新町"},
                        {"name": "穀町"},
                        {"name": "小関"},
                        {"name": "小高"},
                        {"name": "寿町"},
                        {"name": "小中川"},
                        {"name": "小古津新"},
                        {"name": "小牧"},
                        {"name": "幸町"},
                        {"name": "桜町"},
                        {"name": "佐渡"},
                        {"name": "三王渕"},
                        {"name": "下児木"},
                        {"name": "新栄町"},
                        {"name": "新生町"},
                        {"name": "新町"},
                        {"name": "水道町"},
                        {"name": "杉名"},
                        {"name": "杉柳"},
                        {"name": "関崎"},
                        {"name": "杣木"},
                        {"name": "舘野"},
                        {"name": "中央通"},
                        {"name": "長所"},
                        {"name": "長所乙"},
                        {"name": "長所甲"},
                        {"name": "次新"},
                        {"name": "燕"},
                        {"name": "道金"},
                        {"name": "殿島"},
                        {"name": "中川"},
                        {"name": "仲町"},
                        {"name": "長渡"},
                        {"name": "二階堂"},
                        {"name": "灰方"},
                        {"name": "白山町"},
                        {"name": "八王寺"},
                        {"name": "花園町"},
                        {"name": "花見"},
                        {"name": "東太田"},
                        {"name": "日之出町"},
                        {"name": "物流センタ－"},
                        {"name": "本町"},
                        {"name": "又新"},
                        {"name": "松橋"},
                        {"name": "南"},
                        {"name": "宮町"},
                        {"name": "柳山"},
                        {"name": "横田"},
                        {"name": "四ツ屋"},
                    ],
                    "include": [],
                },
                {
                    "name": "新潟県新潟市西蒲区",
                    "exclude": [
                        {"name": "打越"},
                        {"name": "姥島"},
                        {"name": "潟浦新"},
                        {"name": "上小吉"},
                        {"name": "高野宮"},
                        {"name": "河間"},
                        {"name": "五之上"},
                        {"name": "小吉"},
                        {"name": "道上"},
                        {"name": "中之口"},
                        {"name": "長場"},
                        {"name": "羽黒"},
                        {"name": "針ヶ曽根"},
                        {"name": "東小吉"},
                        {"name": "東中"},
                        {"name": "東船越"},
                        {"name": "福島"},
                        {"name": "真木"},
                        {"name": "巻大原"},
                        {"name": "牧ケ島"},
                        {"name": "三ツ門"},
                        {"name": "門田"},
                        {"name": "六部"},
                    ],
                    "include": [],
                },
                {
                    "name": "新潟県長岡市",
                    "exclude": [],
                    "include": [
                        {"name": "赤沼"},
                        {"name": "大沼新田"},
                        {"name": "小沼新田"},
                        {"name": "下沼新田"},
                        {"name": "寺泊小豆曽根"},
                        {"name": "寺泊有信"},
                        {"name": "寺泊入軽井"},
                        {"name": "寺泊岩方"},
                        {"name": "寺泊木島"},
                        {"name": "寺泊北曽根"},
                        {"name": "寺泊五分一"},
                        {"name": "寺泊下桐"},
                        {"name": "寺泊下中条"},
                        {"name": "寺泊新長"},
                        {"name": "寺泊高内"},
                        {"name": "寺泊竹森"},
                        {"name": "寺泊田尻"},
                        {"name": "寺泊敦ケ曽根"},
                        {"name": "寺泊当新田"},
                        {"name": "寺泊中曽根"},
                        {"name": "寺泊硲田"},
                        {"name": "寺泊万善寺"},
                        {"name": "寺泊平野新村新田"},
                        {"name": "寺泊蛇塚"},
                        {"name": "寺泊町軽井"},
                        {"name": "寺泊求草"},
                        {"name": "寺泊矢田"},
                        {"name": "寺泊鰐口"},
                        {"name": "中条新田"},
                        {"name": "中之島西野"},
                        {"name": "真野代新田"},
                    ],
                },
                {"name": "新潟県西蒲原郡"},
            ],
        ),
        (
            "山梨県西八代郡市川三郷町（岩下、岩間、落居、鴨狩津向、楠甫、五八、葛籠沢、寺所及び宮原に限る。）、南巨摩郡（早川町、富士川町及び身延町（相又、粟倉、梅平、大崩、大島、大城、大垈、大野、小田船原、帯金、門野、上八木沢、下八木沢、下山、清子、角打、椿草里、波木井、樋之上、丸滝、光子沢、身延、横根中及び和田を除く。）に限る。）",
            [
                {
                    "name": "山梨県西八代郡市川三郷町",
                    "exclude": [],
                    "include": [
                        {"name": "岩下"},
                        {"name": "岩間"},
                        {"name": "落居"},
                        {"name": "鴨狩津向"},
                        {"name": "楠甫"},
                        {"name": "五八"},
                        {"name": "葛籠沢"},
                        {"name": "寺所"},
                        {"name": "宮原"},
                    ],
                },
                {
                    "name": "山梨県南巨摩郡",
                    "exclude": [],
                    "include": [
                        {"name": "早川町"},
                        {"name": "富士川町"},
                        {
                            "name": "身延町",
                            "exclude": [
                                {"name": "相又"},
                                {"name": "粟倉"},
                                {"name": "梅平"},
                                {"name": "大崩"},
                                {"name": "大島"},
                                {"name": "大城"},
                                {"name": "大垈"},
                                {"name": "大野"},
                                {"name": "小田船原"},
                                {"name": "帯金"},
                                {"name": "門野"},
                                {"name": "上八木沢"},
                                {"name": "下八木沢"},
                                {"name": "下山"},
                                {"name": "清子"},
                                {"name": "角打"},
                                {"name": "椿草里"},
                                {"name": "波木井"},
                                {"name": "樋之上"},
                                {"name": "丸滝"},
                                {"name": "光子沢"},
                                {"name": "身延"},
                                {"name": "横根中"},
                                {"name": "和田"},
                            ],
                            "include": [],
                        },
                    ],
                },
            ],
        ),
        (
            "静岡県御前崎市（御前崎、白羽及び港を除く。）、掛川市、菊川市（牛渕、倉沢、小沢及び沢水加を除く。）",
            [
                {
                    "name": "静岡県御前崎市",
                    "exclude": [{"name": "御前崎"}, {"name": "白羽"}, {"name": "港"}],
                    "include": [],
                },
                {"name": "静岡県掛川市"},
                {
                    "name": "静岡県菊川市",
                    "exclude": [
                        {"name": "牛渕"},
                        {"name": "倉沢"},
                        {"name": "小沢"},
                        {"name": "沢水加"},
                    ],
                    "include": [],
                },
            ],
        ),
        (
            "大阪府池田市空港、大阪市（東住吉区矢田七丁目及び平野区長吉川辺四丁目を除く。）、門真市（石原町、泉町、一番町、大倉町、垣内町、桑才新町、幸福町、寿町、栄町、小路町、新橋町、末広町、月出町、堂山町、殿島町、中町、浜町、速見町、東田町、深田町、古川町、本町、松生町、松葉町、御堂町、向島町、元町、柳田町及び柳町に限る。）、吹田市、摂津市（北別府町、新在家、正雀、正雀本町、庄屋、千里丘、千里丘新町、千里丘東四丁目及び五丁目、西一津屋、浜町、東正雀、東一津屋、東別府、一津屋、別府、三島、南千里丘並びに南別府町に限る。）、豊中市、東大阪市（旭町、池島町、池之端町、出雲井町、出雲井本町、稲葉、今米、岩田町（三丁目を除く。）、瓜生堂一丁目、加納、上石切町、上四条町、上六万寺町、川中、川田、河内町、神田町、喜里川町、北石切町、北鴻池町、客坊町、日下町、五条町、鴻池町、鴻池徳庵町、鴻池本町、鴻池元町、古箕輪、桜町、四条町、島之内、下六万寺町、昭和町、新池島町、新鴻池町、新町、新庄、末広町、角田、善根寺町、鷹殿町、宝町、立花町、玉串町西、玉串町東、玉串元町、豊浦町、鳥居町、中石切町、中新開、中野、中鴻池町、南荘町、西石切町、西岩田一丁目、西鴻池町、額田町、布市町、箱殿町、花園西町、花園東町、花園本町、東石切町、東鴻池町、東豊浦町、東山町、菱江、菱屋東、瓢箪山町、本庄中一丁目、本町、松原、松原南、水走、南鴻池町、南四条町、箕輪、御幸町、元町、山手町、弥生町、横小路町、横枕、横枕西、横枕南、吉田、吉田本町、吉田下島、吉原、六万寺町及び若草町を除く。）、守口市、八尾市（竹渕、竹渕西及び竹渕東に限る。）、兵庫県尼崎市",
            [
                {"name": "大阪府池田市空港"},
                {
                    "name": "大阪府大阪市",
                    "exclude": [
                        {"name": "東住吉区矢田七丁目"},
                        {"name": "平野区長吉川辺四丁目"},
                    ],
                    "include": [],
                },
                {
                    "name": "大阪府門真市",
                    "exclude": [],
                    "include": [
                        {"name": "石原町"},
                        {"name": "泉町"},
                        {"name": "一番町"},
                        {"name": "大倉町"},
                        {"name": "垣内町"},
                        {"name": "桑才新町"},
                        {"name": "幸福町"},
                        {"name": "寿町"},
                        {"name": "栄町"},
                        {"name": "小路町"},
                        {"name": "新橋町"},
                        {"name": "末広町"},
                        {"name": "月出町"},
                        {"name": "堂山町"},
                        {"name": "殿島町"},
                        {"name": "中町"},
                        {"name": "浜町"},
                        {"name": "速見町"},
                        {"name": "東田町"},
                        {"name": "深田町"},
                        {"name": "古川町"},
                        {"name": "本町"},
                        {"name": "松生町"},
                        {"name": "松葉町"},
                        {"name": "御堂町"},
                        {"name": "向島町"},
                        {"name": "元町"},
                        {"name": "柳田町"},
                        {"name": "柳町"},
                    ],
                },
                {"name": "大阪府吹田市"},
                {
                    "name": "大阪府摂津市",
                    "exclude": [],
                    "include": [
                        {"name": "北別府町"},
                        {"name": "新在家"},
                        {"name": "正雀"},
                        {"name": "正雀本町"},
                        {"name": "庄屋"},
                        {"name": "千里丘"},
                        {"name": "千里丘新町"},
                        {"name": "千里丘東四丁目"},
                        {"name": "千里丘東五丁目"},
                        {"name": "西一津屋"},
                        {"name": "浜町"},
                        {"name": "東正雀"},
                        {"name": "東一津屋"},
                        {"name": "東別府"},
                        {"name": "一津屋"},
                        {"name": "別府"},
                        {"name": "三島"},
                        {"name": "南千里丘"},
                        {"name": "南別府町"},
                    ],
                },
                {
                    "name": "大阪府豊中市",
                },
                {
                    "name": "大阪府東大阪市",
                    "exclude": [
                        {"name": "旭町"},
                        {"name": "池島町"},
                        {"name": "池之端町"},
                        {"name": "出雲井町"},
                        {"name": "出雲井本町"},
                        {"name": "稲葉"},
                        {"name": "今米"},
                        {"name": "岩田町", "exclude": [{"name": "三丁目"}], "include": []},
                        {"name": "瓜生堂一丁目"},
                        {"name": "加納"},
                        {"name": "上石切町"},
                        {"name": "上四条町"},
                        {"name": "上六万寺町"},
                        {"name": "川中"},
                        {"name": "川田"},
                        {"name": "河内町"},
                        {"name": "神田町"},
                        {"name": "喜里川町"},
                        {"name": "北石切町"},
                        {"name": "北鴻池町"},
                        {"name": "客坊町"},
                        {"name": "日下町"},
                        {"name": "五条町"},
                        {"name": "鴻池町"},
                        {"name": "鴻池徳庵町"},
                        {"name": "鴻池本町"},
                        {"name": "鴻池元町"},
                        {"name": "古箕輪"},
                        {"name": "桜町"},
                        {"name": "四条町"},
                        {"name": "島之内"},
                        {"name": "下六万寺町"},
                        {"name": "昭和町"},
                        {"name": "新池島町"},
                        {"name": "新鴻池町"},
                        {"name": "新町"},
                        {"name": "新庄"},
                        {"name": "末広町"},
                        {"name": "角田"},
                        {"name": "善根寺町"},
                        {"name": "鷹殿町"},
                        {"name": "宝町"},
                        {"name": "立花町"},
                        {"name": "玉串町西"},
                        {"name": "玉串町東"},
                        {"name": "玉串元町"},
                        {"name": "豊浦町"},
                        {"name": "鳥居町"},
                        {"name": "中石切町"},
                        {"name": "中新開"},
                        {"name": "中野"},
                        {"name": "中鴻池町"},
                        {"name": "南荘町"},
                        {"name": "西石切町"},
                        {"name": "西岩田一丁目"},
                        {"name": "西鴻池町"},
                        {"name": "額田町"},
                        {"name": "布市町"},
                        {"name": "箱殿町"},
                        {"name": "花園西町"},
                        {"name": "花園東町"},
                        {"name": "花園本町"},
                        {"name": "東石切町"},
                        {"name": "東鴻池町"},
                        {"name": "東豊浦町"},
                        {"name": "東山町"},
                        {"name": "菱江"},
                        {"name": "菱屋東"},
                        {"name": "瓢箪山町"},
                        {"name": "本庄中一丁目"},
                        {"name": "本町"},
                        {"name": "松原"},
                        {"name": "松原南"},
                        {"name": "水走"},
                        {"name": "南鴻池町"},
                        {"name": "南四条町"},
                        {"name": "箕輪"},
                        {"name": "御幸町"},
                        {"name": "元町"},
                        {"name": "山手町"},
                        {"name": "弥生町"},
                        {"name": "横小路町"},
                        {"name": "横枕"},
                        {"name": "横枕西"},
                        {"name": "横枕南"},
                        {"name": "吉田"},
                        {"name": "吉田本町"},
                        {"name": "吉田下島"},
                        {"name": "吉原"},
                        {"name": "六万寺町"},
                        {"name": "若草町"},
                    ],
                    "include": [],
                },
                {
                    "name": "大阪府守口市",
                },
                {
                    "name": "大阪府八尾市",
                    "exclude": [],
                    "include": [
                        {"name": "竹渕"},
                        {"name": "竹渕西"},
                        {"name": "竹渕東"},
                    ],
                },
                {
                    "name": "兵庫県尼崎市",
                },
            ],
        ),
        (
            "大阪府交野市、門真市（石原町、泉町、一番町、大倉町、垣内町、桑才新町、幸福町、寿町、栄町、小路町、新橋町、末広町、月出町、堂山町、殿島町、中町、浜町、速見町、東田町、深田町、古川町、本町、松生町、松葉町、御堂町、向島町、元町、柳田町及び柳町を除く。）、四條畷市（上田原、さつきヶ丘、下田原、田原台及び緑風台を除く。）、大東市、寝屋川市、東大阪市（加納五丁目から八丁目までに限る。）、枚方市",
            [
                {"name": "大阪府交野市"},
                {
                    "name": "大阪府門真市",
                    "exclude": [
                        {"name": "石原町"},
                        {"name": "泉町"},
                        {"name": "一番町"},
                        {"name": "大倉町"},
                        {"name": "垣内町"},
                        {"name": "桑才新町"},
                        {"name": "幸福町"},
                        {"name": "寿町"},
                        {"name": "栄町"},
                        {"name": "小路町"},
                        {"name": "新橋町"},
                        {"name": "末広町"},
                        {"name": "月出町"},
                        {"name": "堂山町"},
                        {"name": "殿島町"},
                        {"name": "中町"},
                        {"name": "浜町"},
                        {"name": "速見町"},
                        {"name": "東田町"},
                        {"name": "深田町"},
                        {"name": "古川町"},
                        {"name": "本町"},
                        {"name": "松生町"},
                        {"name": "松葉町"},
                        {"name": "御堂町"},
                        {"name": "向島町"},
                        {"name": "元町"},
                        {"name": "柳田町"},
                        {"name": "柳町"},
                    ],
                    "include": [],
                },
                {
                    "name": "大阪府四條畷市",
                    "exclude": [
                        {"name": "上田原"},
                        {"name": "さつきヶ丘"},
                        {"name": "下田原"},
                        {"name": "田原台"},
                        {"name": "緑風台"},
                    ],
                    "include": [],
                },
                {
                    "name": "大阪府大東市",
                },
                {
                    "name": "大阪府寝屋川市",
                },
                {
                    "name": "大阪府東大阪市",
                    "exclude": [],
                    "include": [
                        {"name": "加納五丁目"},
                        {"name": "加納六丁目"},
                        {"name": "加納七丁目"},
                        {"name": "加納八丁目"},
                    ],
                },
                {
                    "name": "大阪府枚方市",
                },
            ],
        ),
        (
            "広島県庄原市（東城町を除く。）",
            [{"name": "広島県庄原市", "exclude": [{"name": "東城町"}], "include": []}],
        ),
        (
            "広島県福山市（今津町、金江町金見、金江町藁江、神村町、高西町川尻、高西町真田、高西町南、東村町、藤江町、本郷町、松永町、南松永町、宮前町及び柳津町に限る。）（ただし、市外局番を除く電気通信番号による発信については、番号区画コード499の番号区画（福山市（内海町、神辺町及び沼隈町に限る。）を除く。）を含む。）",
            [
                {
                    "name": "広島県福山市",
                    "exclude": [],
                    "include": [
                        {"name": "今津町"},
                        {"name": "金江町金見"},
                        {"name": "金江町藁江"},
                        {"name": "神村町"},
                        {"name": "高西町川尻"},
                        {"name": "高西町真田"},
                        {"name": "高西町南"},
                        {"name": "東村町"},
                        {"name": "藤江町"},
                        {"name": "本郷町"},
                        {"name": "松永町"},
                        {"name": "南松永町"},
                        {"name": "宮前町"},
                        {"name": "柳津町"},
                    ],
                },
            ],
        ),
    ],
)
def test_normal(input_text: str, expected: list):
    actual = parse_section_text(input_text)
    assert actual == expected
